{"payload":{"allShortcutsEnabled":false,"fileTree":{"":{"items":[{"name":".gitignore","path":".gitignore","contentType":"file"},{"name":"Binomial Analysis.r","path":"Binomial Analysis.r","contentType":"file"},{"name":"README.md","path":"README.md","contentType":"file"}],"totalCount":3}},"fileTreeProcessingTime":1.5038390000000001,"foldersToFetch":[],"reducedMotionEnabled":null,"repo":{"id":230690462,"defaultBranch":"master","name":"Binomial-Analysis","ownerLogin":"MesserLab","currentUserCanPush":false,"isFork":false,"isEmpty":false,"createdAt":"2019-12-29T01:57:53.000Z","ownerAvatar":"https://avatars.githubusercontent.com/u/10171238?v=4","public":true,"private":false,"isOrgOwned":true},"refInfo":{"name":"master","listCacheKey":"v0:1577584676.0","canEdit":false,"refType":"branch","currentOid":"3d246597a037ccf34125488a55ef5bb362d9f32f"},"path":"Binomial Analysis.r","currentUser":null,"blob":{"rawBlob":"#install.packages(\"lme4\")\n#install.packages(\"emmeans\")\nlibrary(lme4)\nlibrary(emmeans)\n\n# Each .csv file in the current working directory will be analyzed.\nfiles <- list.files(path='.',pattern='\\\\.csv$')\nfiles\n\nfor (f in files) {\n  file = read.csv(f,as.is=T,header = T,check.names=F,na.strings=\"\",blank.lines.skip=T)\n  data = file\n  Group = NULL\n  Drive = NULL\n  m = NULL\n  d = NULL\n  # Iterate through the current file and composite data into the \"Group\" and \"Drive\" lists.\n  for (i in 1:nrow(data)) {\n    dr = data[i, 1]\n    res = data[i, 2]\n    dr_vial = rep(i - 1, dr)\n    res_vial = rep(i - 1, res)\n    dr_inds = rep(1, dr)\n    res_inds = rep(0, res)\n    Group = c(Group, dr_vial, res_vial)\n    Drive =  c(Drive, dr_inds, res_inds)\n  }\n  d <- data.frame(Group, Drive)\n  # Fit a generalized linear model to the data, with the \"Group\" as a random-effects part of the model.\n  m <- glmer(Drive ~ 1 + (1 | Group), data = d, family = binomial, nAGQ = 25)\n  print(summary(m))\n  outfile <- file(paste(f, \"_analysis.txt\", sep=\"\"), \"w\")\n  sink(outfile)\n  print(summary(m))\n  print(confint(m))\n  print(coef(m))\n  # Least squared means analysis of the model.\n  print(emmeans(m, ~1, type=\"response\"))\n  sink()\n  close(outfile)\n}\nprint(\"Finished!\")","colorizedLines":["<span class=\"pl-c\"><span class=\"pl-c\">#</span>install.packages(&quot;lme4&quot;)</span>","<span class=\"pl-c\"><span class=\"pl-c\">#</span>install.packages(&quot;emmeans&quot;)</span>","library(<span class=\"pl-smi\">lme4</span>)","library(<span class=\"pl-smi\">emmeans</span>)","","<span class=\"pl-c\"><span class=\"pl-c\">#</span> Each .csv file in the current working directory will be analyzed.</span>","<span class=\"pl-smi\">files</span> <span class=\"pl-k\">&lt;-</span> list.files(<span class=\"pl-v\">path</span><span class=\"pl-k\">=</span><span class=\"pl-s\"><span class=\"pl-pds\">&#39;</span>.<span class=\"pl-pds\">&#39;</span></span>,<span class=\"pl-v\">pattern</span><span class=\"pl-k\">=</span><span class=\"pl-s\"><span class=\"pl-pds\">&#39;</span><span class=\"pl-cce\">\\\\</span>.csv$<span class=\"pl-pds\">&#39;</span></span>)","<span class=\"pl-smi\">files</span>","","<span class=\"pl-k\">for</span> (<span class=\"pl-smi\">f</span> <span class=\"pl-k\">in</span> <span class=\"pl-smi\">files</span>) {","  <span class=\"pl-v\">file</span> <span class=\"pl-k\">=</span> read.csv(<span class=\"pl-smi\">f</span>,<span class=\"pl-v\">as.is</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">T</span>,<span class=\"pl-v\">header</span> <span class=\"pl-k\">=</span> <span class=\"pl-c1\">T</span>,<span class=\"pl-v\">check.names</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">F</span>,<span class=\"pl-v\">na.strings</span><span class=\"pl-k\">=</span><span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span><span class=\"pl-pds\">&quot;</span></span>,<span class=\"pl-v\">blank.lines.skip</span><span class=\"pl-k\">=</span><span class=\"pl-c1\">T</span>)","  <span class=\"pl-v\">data</span> <span class=\"pl-k\">=</span> <span class=\"pl-smi\">file</span>","  <span class=\"pl-v\">Group</span> <span class=\"pl-k\">=</span> <span class=\"pl-c1\">NULL</span>","  <span class=\"pl-v\">Drive</span> <span class=\"pl-k\">=</span> <span class=\"pl-c1\">NULL</span>","  <span class=\"pl-v\">m</span> <span class=\"pl-k\">=</span> <span class=\"pl-c1\">NULL</span>","  <span class=\"pl-v\">d</span> <span class=\"pl-k\">=</span> <span class=\"pl-c1\">NULL</span>","  <span class=\"pl-c\"><span class=\"pl-c\">#</span> Iterate through the current file and composite data into the &quot;Group&quot; and &quot;Drive&quot; lists.</span>","  <span class=\"pl-k\">for</span> (<span class=\"pl-smi\">i</span> <span class=\"pl-k\">in</span> <span class=\"pl-c1\">1</span><span class=\"pl-k\">:</span>nrow(<span class=\"pl-smi\">data</span>)) {","    <span class=\"pl-v\">dr</span> <span class=\"pl-k\">=</span> <span class=\"pl-smi\">data</span>[<span class=\"pl-smi\">i</span>, <span class=\"pl-c1\">1</span>]","    <span class=\"pl-v\">res</span> <span class=\"pl-k\">=</span> <span class=\"pl-smi\">data</span>[<span class=\"pl-smi\">i</span>, <span class=\"pl-c1\">2</span>]","    <span class=\"pl-v\">dr_vial</span> <span class=\"pl-k\">=</span> rep(<span class=\"pl-smi\">i</span> <span class=\"pl-k\">-</span> <span class=\"pl-c1\">1</span>, <span class=\"pl-smi\">dr</span>)","    <span class=\"pl-v\">res_vial</span> <span class=\"pl-k\">=</span> rep(<span class=\"pl-smi\">i</span> <span class=\"pl-k\">-</span> <span class=\"pl-c1\">1</span>, <span class=\"pl-smi\">res</span>)","    <span class=\"pl-v\">dr_inds</span> <span class=\"pl-k\">=</span> rep(<span class=\"pl-c1\">1</span>, <span class=\"pl-smi\">dr</span>)","    <span class=\"pl-v\">res_inds</span> <span class=\"pl-k\">=</span> rep(<span class=\"pl-c1\">0</span>, <span class=\"pl-smi\">res</span>)","    <span class=\"pl-v\">Group</span> <span class=\"pl-k\">=</span> c(<span class=\"pl-smi\">Group</span>, <span class=\"pl-smi\">dr_vial</span>, <span class=\"pl-smi\">res_vial</span>)","    <span class=\"pl-v\">Drive</span> <span class=\"pl-k\">=</span>  c(<span class=\"pl-smi\">Drive</span>, <span class=\"pl-smi\">dr_inds</span>, <span class=\"pl-smi\">res_inds</span>)","  }","  <span class=\"pl-smi\">d</span> <span class=\"pl-k\">&lt;-</span> <span class=\"pl-k\">data.frame</span>(<span class=\"pl-smi\">Group</span>, <span class=\"pl-smi\">Drive</span>)","  <span class=\"pl-c\"><span class=\"pl-c\">#</span> Fit a generalized linear model to the data, with the &quot;Group&quot; as a random-effects part of the model.</span>","  <span class=\"pl-smi\">m</span> <span class=\"pl-k\">&lt;-</span> glmer(<span class=\"pl-smi\">Drive</span> <span class=\"pl-k\">~</span> <span class=\"pl-c1\">1</span> <span class=\"pl-k\">+</span> (<span class=\"pl-c1\">1</span> <span class=\"pl-k\">|</span> <span class=\"pl-smi\">Group</span>), <span class=\"pl-v\">data</span> <span class=\"pl-k\">=</span> <span class=\"pl-smi\">d</span>, <span class=\"pl-v\">family</span> <span class=\"pl-k\">=</span> <span class=\"pl-smi\">binomial</span>, <span class=\"pl-v\">nAGQ</span> <span class=\"pl-k\">=</span> <span class=\"pl-c1\">25</span>)","  print(summary(<span class=\"pl-smi\">m</span>))","  <span class=\"pl-smi\">outfile</span> <span class=\"pl-k\">&lt;-</span> file(paste(<span class=\"pl-smi\">f</span>, <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>_analysis.txt<span class=\"pl-pds\">&quot;</span></span>, <span class=\"pl-v\">sep</span><span class=\"pl-k\">=</span><span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span><span class=\"pl-pds\">&quot;</span></span>), <span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>w<span class=\"pl-pds\">&quot;</span></span>)","  sink(<span class=\"pl-smi\">outfile</span>)","  print(summary(<span class=\"pl-smi\">m</span>))","  print(confint(<span class=\"pl-smi\">m</span>))","  print(coef(<span class=\"pl-smi\">m</span>))","  <span class=\"pl-c\"><span class=\"pl-c\">#</span> Least squared means analysis of the model.</span>","  print(emmeans(<span class=\"pl-smi\">m</span>, <span class=\"pl-k\">~</span><span class=\"pl-c1\">1</span>, <span class=\"pl-v\">type</span><span class=\"pl-k\">=</span><span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>response<span class=\"pl-pds\">&quot;</span></span>))","  sink()","  close(<span class=\"pl-smi\">outfile</span>)","}","print(<span class=\"pl-s\"><span class=\"pl-pds\">&quot;</span>Finished!<span class=\"pl-pds\">&quot;</span></span>)"],"stylingDirectives":null,"csv":null,"csvError":null,"dependabotInfo":{"showConfigurationBanner":false,"configFilePath":null,"networkDependabotPath":"/MesserLab/Binomial-Analysis/network/updates","dismissConfigurationNoticePath":"/settings/dismiss-notice/dependabot_configuration_notice","configurationNoticeDismissed":null,"repoAlertsPath":"/MesserLab/Binomial-Analysis/security/dependabot","repoSecurityAndAnalysisPath":"/MesserLab/Binomial-Analysis/settings/security_analysis","repoOwnerIsOrg":true,"currentUserCanAdminRepo":false},"displayName":"Binomial Analysis.r","displayUrl":"https://github.com/MesserLab/Binomial-Analysis/blob/master/Binomial%20Analysis.r?raw=true","headerInfo":{"blobSize":"1.21 KB","deleteInfo":{"deletePath":null,"deleteTooltip":"You must be signed in to make or propose changes"},"editInfo":{"editTooltip":"You must be signed in to make or propose changes"},"ghDesktopPath":"https://desktop.github.com","gitLfsPath":null,"onBranch":true,"shortPath":"63df060","siteNavLoginPath":"/login?return_to=https%3A%2F%2Fgithub.com%2FMesserLab%2FBinomial-Analysis%2Fblob%2Fmaster%2FBinomial%2520Analysis.r","isCSV":false,"isRichtext":false,"toc":null,"lineInfo":{"truncatedLoc":"42","truncatedSloc":"40"},"mode":"file"},"image":false,"isCodeownersFile":null,"isValidLegacyIssueTemplate":false,"issueTemplateHelpUrl":"https://docs.github.com/articles/about-issue-and-pull-request-templates","issueTemplate":null,"discussionTemplate":null,"language":"R","large":false,"loggedIn":false,"newDiscussionPath":"/MesserLab/Binomial-Analysis/discussions/new","newIssuePath":"/MesserLab/Binomial-Analysis/issues/new","planSupportInfo":{"repoIsFork":null,"repoOwnedByCurrentUser":null,"requestFullPath":"/MesserLab/Binomial-Analysis/blob/master/Binomial%20Analysis.r","showFreeOrgGatedFeatureMessage":null,"showPlanSupportBanner":null,"upgradeDataAttributes":null,"upgradePath":null},"publishBannersInfo":{"dismissActionNoticePath":"/settings/dismiss-notice/publish_action_from_dockerfile","dismissStackNoticePath":"/settings/dismiss-notice/publish_stack_from_file","releasePath":"/MesserLab/Binomial-Analysis/releases/new?marketplace=true","showPublishActionBanner":false,"showPublishStackBanner":false},"renderImageOrRaw":false,"richText":null,"renderedFileInfo":null,"tabSize":8,"topBannersInfo":{"overridingGlobalFundingFile":false,"globalPreferredFundingPath":null,"repoOwner":"MesserLab","repoName":"Binomial-Analysis","showInvalidCitationWarning":false,"citationHelpUrl":"https://docs.github.com/en/github/creating-cloning-and-archiving-repositories/creating-a-repository-on-github/about-citation-files","showDependabotConfigurationBanner":false,"actionsOnboardingTip":null},"truncated":false,"viewable":true,"workflowRedirectUrl":null,"symbols":{"timedOut":false,"notAnalyzed":true,"symbols":[]}},"csrf_tokens":{"/MesserLab/Binomial-Analysis/branches":{"post":"8mZZxcXSVTAswIyce7QYopT_6OcQl8sCdBa8w0jU22huIwwjCDU09p_VIIwPxKdRk7liVNnb2j4pFPnSVLN9Sg"}}},"title":"Binomial-Analysis/Binomial Analysis.r at master · MesserLab/Binomial-Analysis","locale":"en"}